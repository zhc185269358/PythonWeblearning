# URL--路由

##### URL是一个完全的python模块,通常称为URLconf.包含的是URL模式,到应用的视图的简单映射



## Django如何处理请求

##### 	它根据URL,来查找urlpatterns中的匹配函数url()中的正则表达式规则,若发现匹配的项,就会把HttpRequest发送到视图函数中去进行处理,用以返回页面

### 注意以下几点:

- ##### 若要从URL中捕获一个值,只需要在他周围放置一对圆括号

  ```python
  url(r'^articles/([0-9]{4})/$', views.year_archive),
  ```

- ##### 不需要添加前导的反斜杠 应该是`^articles` 而不是 `^/articles`。

- ##### 每个正则表达式前面的`'r'` 是可选的但是建议加上。它告诉Python 这个字符串是“原始的” —— 字符串中任何字符都不应该转义。



## 命名组(带有参数的URL)

##### 	上面的示例使用简单的、*没有命名*的正则表达式组（通过圆括号） 来捕获URL 中的值并以`位置参数`传递给视图

##### 	如何编写带有参数的URL 语法如下:

###### 		`(?P<参数名称>正则匹配规则)`

##### 	在编写了正则表达时候,同时我们的视图也必须由对应的位置参数来获取这个URL中传递的参数.

##### 	带有参数的URL的意思是,在对应的匹配位置,匹配到的结果不只是作为一个字符串表示匹配成功,还应该按照语法规则,设置专门的变量去保存这个参数,并传递进后边给出的视图函数中去.这样才能实现一些数据传递或者认证.

- ##### 记住一点,捕获的参数永远是字符串,尽管在正则表达式中匹配模式为数字.



## 关于带参数的视图函数

##### 任何带有参数的正则表达式都会有一个变量名,这个变量名一定要与对应视图函数中的位置参数名匹配.同时还能给这个参数在视图函数中使用默认参数的方式添加默认值.

##### 添加默认值给视图函数解决了有两个相同的匹配模式匹配同一个视图函数,但是其中一个无法指定参数,而大胖纸的报错行为.

##### 当父路由包含参数而同时将URL指向子路由,那么,这个包含的参数也会传递过去

##### 作为一个经验的法则，当正则表达式需要一个参数但视图忽略它的时候，只捕获视图需要的值并使用非捕获参数。

- ##### 语法如下		(?: ...)



## URL反向解析:

##### 如何设置反向解析: 在url函数的最后由name=value这个关键字参数来制定反向解析的名称.

##### 一旦我们指定的反向解析,那么我们今后在视图和模板中在想要使用URL的时候就避免了硬编码

##### 具体的是:

- ##### 在模板中使用: 使用带有{% url %}标签的语法,url后面跟反向解析指定的名称

- ##### 在python代码中: 使用reverse()函数,内部放入name指定的值

- ##### 在更高层的与处理Django 模型实例相关的代码中：使用[`get_absolute_url()`](https://yiyibooks.cn/__trs__/xx/Django_1.11.6/ref/models/instances.html#django.db.models.Model.get_absolute_url) 方法。



